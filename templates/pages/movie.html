{% extends 'layout/base.html' %}
{% block content %}
<img class="movie-info-poster" src="{{ movie_info['Poster'] }}" alt="#">
<h1>{{ movie_info['Title'] }}</h1>
<div class="row">
    <div class="col-6">
        <li class="list-display"><span class="bold">Year of release:</span> {{ movie_info['Year'] }}</li>
    </div>
    <div class="col-6">
        <li class="list-display"><span class="bold">Rated:</span> {{ movie_info['Rated'] }}</li>
    </div>
</div>
<div class="row">
    <div class="col-6">
        <li class="list-display"><span class="bold">Runtime:</span> {{ movie_info['Runtime'] }}</li>
    </div>
    <div class="col-6">
        <li class="list-display"><span class="bold">Genre:</span> {{ movie_info['Genre'] }}</li>
    </div>
</div>
<div class="row">
    <div class="col-6">
        <li class="list-display"><span class="bold">Director(s):</span> {{ movie_info['Director'] }}</li>
    </div>
    <div class="col-6">
        <li class="list-display"><span class="bold">Writer(s):</span> {{ movie_info['Writer'] }}</li>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <li class="list-display"><span class="bold">{{ movie_info['Plot'] }}</span></li>
    </div>
</div>
<div class="row">
    <div class="col">
        <form action="{{ url_for('add_review', imdb_id=movie_info['imdbID']) }}">
            <button type="submit" class="btn btn-success button-spacing">Review</button>
        </form>
    </div>
</div>

{% for review in reviews %}
<div class="row">
    <div class="col">
        <h3>User: {{ review['username'] }}</h3>
    </div>
</div>
<div class="row">
    <div class="col">
        <p>{{ review['comments'] }}</p>
    </div>
</div>
<div class="row">
    <div class="col">
        <p>Score: {{ review['score'] }}</p>
    </div>
</div>
<div class="row">
    <div class="col">
        <form action="{{ url_for('edit_review', review_id=review['_id']) }}" method="POST">
            <button type="submit" class="btn btn-secondary button-spacing">Edit</button>
        </form>
    </div>
    <div class="col">
        <button type="button" class="btn btn-primary button-spacing" data-toggle="modal" data-target="#confirmModal">Delete</button>
    </div>
</div>
<!--Delete Review Modal -->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmModalLabel">Are you sure you want to delete this Review?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <form action="{{ url_for('delete_review', review_id=review['_id']) }}" method="POST">
                    <input class="btn btn-primary" type="submit" value="Delete">
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endblock %}